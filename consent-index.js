!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ConsentLibrary=e()}(this,(function(){"use strict";var t=function(){function t(){}return t.loadScript=function(t){return new Promise((function(e,n){var o=document.createElement("script");o.src=t.src,o.type="text/javascript",o.async=t.async||!0,o.defer=t.defer||!0,(t.attributes||[]).forEach((function(t){return o.setAttribute(t.name,t.value)})),o.onload=function(){e()};var r=document.getElementsByTagName("head")[0];return r?(r.appendChild(o),o):n(new Error("Couldn't find target to inject script."))}))},t}(),e=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PO","PT","RO","SK","SI","ES","SE"],n={C0001:["A/B testing","Security & Fraud","Tag Managers"],C0002:["Analytics","Customer Success","Feature Flagging","Performance Monitoring","Raw Data","Surveys","Video"],C0003:["CRM","Heatmaps & Recordings","Livechat","Personalization","Storage Destinations"],C0004:["Advertising","Attribution","Deep linking","Email","Email Marketing","Enrichment","Marketing Automation"],C0005:["Referrals","SMS & Push Notifications"]},o="consentlibrary-geo-variant";return function(){function r(t){var e=this;this.loadGeoVariant=function(){var t=e.getGeoVariant();t&&(window.OneTrust={geolocationResponse:{countryCode:t.country,stateCode:t.state}})},this.createOptanonWrapper=function(t){window.OptanonWrapper=function(){e.provider=window.Optanon,window.OnetrustCachedGroups!==window.OptanonActiveGroups&&window.Optanon.OnConsentChanged(e.params.onConsentChanged),window.OnetrustCachedGroups=window.OptanonActiveGroups,window.isConsentLibraryLoaded=!0,!e.loaded&&e.params.onLoad&&e.params.onLoad(),e.loaded=!0,t()}},this.getOneTrustAcceptedCategories=function(){return window.OptanonActiveGroups?window.OptanonActiveGroups.split(",").filter((function(t){return t&&t.length>0})):[]},this.getGeoVariant=function(){var t,e,n,r=null===(t=window.localStorage)||void 0===t?void 0:t.getItem(o);return r?{country:null===(e=r.trim().split(",")[0])||void 0===e?void 0:e.trim(),state:null===(n=r.trim().split(",")[1])||void 0===n?void 0:n.trim()}:null},this.params=t,this.loaded=!1,this.params.onConsentChanged=this.params.onConsentChanged||function(){}}return r.prototype.load=function(){var e=this;return new Promise((function(n,o){if(!0===window.isConsentLibraryLoaded)return o(new Error("Onetrust already loaded"));window.dataLayer=window.dataLayer||[],e.loadGeoVariant(),e.createOptanonWrapper(n);var r={src:"https://cdn.cookielaw.org/scripttemplates/otSDKStub.js",attributes:[{name:"data-domain-script",value:e.params.id},{name:"data-document-language",value:"true"}]};t.loadScript(r).catch(o)}))},r.prototype.isGDPR=function(){var t=this.getProvider().getGeolocationData();return e.indexOf(t.country.toUpperCase())>=0},r.prototype.isCCPA=function(){var t=this.getProvider().getGeolocationData();return"US"===t.country.toUpperCase()&&"CA"===t.state.toUpperCase()},r.prototype.getSegmentAcceptedCategories=function(){var t=this.getOneTrustAcceptedCategories(),e=[];return t.forEach((function(t){e.push.apply(e,n[t])})),e},r.prototype.getAcceptedCategories=function(){return{provider:this.getOneTrustAcceptedCategories(),segment:this.getSegmentAcceptedCategories()}},r.prototype.getProvider=function(){return this.provider},r.setGeoVariant=function(t,e){var n,r=t+","+e;null===(n=window.localStorage)||void 0===n||n.setItem(o,r)},r.clearGeoVariant=function(){var t;null===(t=window.localStorage)||void 0===t||t.removeItem(o)},r}()}));
//# sourceMappingURL=index.js.map
